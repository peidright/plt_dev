/////////////////////////////////////////////////////////////////////////
///@system 010084010070010086010063010057¨050100650100630100860309010079¨07010083010058010081010056
///@company 010077010083010062010045010074010093010063010011010084010073010083010044010064010064010078010011010087010084010083010097010061010050010079010066
///@file ThostFtdcMdApi.h
///@brief 01005903§01008601000201006901007901006701008101006303ì010059010079010065010087010067010093
///@history 
///20060106	010089010088010062¨¨¨02010063		01005701005701006503§010060010071010082010072010064010016
/////////////////////////////////////////////////////////////////////////

#if !defined(THOST_FTDCMDAPI_H)
#define THOST_FTDCMDAPI_H

#if _MSC_VER > 1000
#pragma once
#endif // _MSC_VER > 1000

#include "ThostFtdcUserApiStruct.h"

#if defined(ISLIB) && defined(WIN32)
#ifdef LIB_MD_API_EXPORT
#define MD_API_EXPORT __declspec(dllexport)
#else
#define MD_API_EXPORT __declspec(dllimport)
#endif
#else
#define MD_API_EXPORT 
#endif

class CThostFtdcMdSpi
{
public:
	///010058030801006701008101006303ì0100590100790100870100050100650100630100860309010062¨0301008003§01006503§01006901004401007401000801008103§010084010073010069010051010065010087010078030801004503§010063010061010082010057010058010075010070010064010075030001004501004801004501005101006001007103¤01006503¤03§03080100630100580300010087010071010043010045
	virtual void OnFrontConnected(){};
	
	///010058030801006701008101006303ì0100590100790100870100050100650100630100860309010062¨0301008003§01008103§010084010073010069010051010065010087010059010083010067010049010078030801004501005101006001007103¤01006503¤03§03080100630100580300010087010071010043010045010058030803¤010044010077¨05010089010099010060010012010075¨07010067010012010062¨03010045010051API010063¨04030901008801005901005401009001009101008401007001006901005101006501008701004501005101006701008101006303ì0100590100790100670100770100550100630309010012010057010047010068¨09010043010045
	///@param nReason 010057¨09010082¨03010088010052010086¨°
	///        0x1001 01008101001301007001000401005901006901007803ì0300010095
	///        0x1002 01008101001301007001000401008401005701007803ì0300010095
	///        0x2001 0100650100870100780100890100840100720100800100130100560100510100780308
	///        0x2002 03¤01004401007901008101008401007201008001001301007803ì0300010095
	///        0x2003 010078010089010058010065010057¨09010082¨03030803§010082010072
	virtual void OnFrontDisconnected(int nReason){};
		
	///0100840100720100800100130100560100510100780308010066010054010060010003010043010045010058030801005603è0100780308010064010001010082010057010078010089010058010065030803§010082010072010078030801004501005101006001007103¤01006503¤03§03080100630100580300010087010071010043010045
	///@param nTimeLapse 010066¨¤010068010005010077010083010057010082010065010087010078010089030803§0100820100720100580100720100780308010064010001
	virtual void OnHeartBeatWarning(int nTimeLapse){};
	

	///010058010075010070010064010075010005010075¨03010083¨01010087010047
	virtual void OnRspUserLogin(CThostFtdcRspUserLoginField *pRspUserLogin, CThostFtdcRspInfoField *pRspInfo, int nRequestID, bool bIsLast) {};

	///010058010075010056010012010075010005010075¨03010083¨01010087010047
	virtual void OnRspUserLogout(CThostFtdcUserLogoutField *pUserLogout, CThostFtdcRspInfoField *pRspInfo, int nRequestID, bool bIsLast) {};

	///010057¨09010082¨03010087010047010057010008
	virtual void OnRspError(CThostFtdcRspInfoField *pRspInfo, int nRequestID, bool bIsLast) {};

	///010059010048010088010072010084010084010075¨07010087010047010057010008
	virtual void OnRspSubMarketData(CThostFtdcSpecificInstrumentField *pSpecificInstrument, CThostFtdcRspInfoField *pRspInfo, int nRequestID, bool bIsLast) {};

	///010076010043010083010014010059010048010088010072010084010084010075¨07010087010047010057010008
	virtual void OnRspUnSubMarketData(CThostFtdcSpecificInstrumentField *pSpecificInstrument, CThostFtdcRspInfoField *pRspInfo, int nRequestID, bool bIsLast) {};

	///010077010006010059010076010084010084010075¨0701008103§010090010049
	virtual void OnRtnDepthMarketData(CThostFtdcDepthMarketDataField *pDepthMarketData) {};
};

class MD_API_EXPORT CThostFtdcMdApi
{
public:
	///01005701005701006503§MdApi
	///@param pszFlowPath 010057010003010090¨0101005901004801008801007201008401007301008301004401008201007201006401001601005801007201007201006701007001006401004501005101007201005101007601008301008201004901005803080100750300010072010067010070010064
	///@return 01005701005701006503§010056010012010058010072UserApi
	///modify for udp marketdata
	static CThostFtdcMdApi *CreateFtdcMdApi(const char *pszFlowPath = "", const bool bIsUsingUdp=false, const bool bIsMulticast=false);
	
	///010077010066010056010015010065010087010067010093010059010088010083¨030308010066010077¨09
	///@remark 0100550100630100880100920100780100610100870100710308010066010065010087010067010093010059010088010083¨030100780308,0100580300010087010071010060010071010062010054010078010015010077010066010056010015010065010087010067010093010059010088010083¨03
	virtual void Release() = 0;
	
	///010056010011010078010064010063010054
	///@remark 01005601001101007801006401006301005401008801007901008401008401006303¤010066010056,0100900100630100870100840100580300010087010071010062¨03,01006501008701006701009301005501007301006701004901007801006401006103è03090300
	virtual void Init() = 0;
	
	///010058010076010057010015010065010087010067010093010083010098010056010080010065¨04010078010013010088010079010084010084
	///@return 010083010098010056010080010081010079010056010012010057¨05010070010005
	virtual int Join() = 0;
	
	///010063010009010076010043010058030801007503000100650100630100860309010076010089
	///@retrun 0100630100090100760100430100580100650100580100720100650100630100860309010076010089
	///@remark 010090010063010087010084010058010075010070010064010056010077010061010047010062¨03,01005501007301007201009501005801007101005801006501008901001501007603¤0100580100720100650100630100860309010076010089
	virtual const char *GetTradingDay() = 0;
	
	///0309010044010055¨040100750300010090010071010063¨0501008101001301007001000401005801009101009003¤
	///@param pszFrontAddress0100450100620100750300010090010071010063¨0501008101001301007001000401005801009101009003¤010043010045
	///@remark 01008101001301007001000401005801009101009003¤0100580100720100600100090100780100650100820100490100450100620100430300protocol://ipaddress:port01004303080100450100510100760100040100450100620100430308tcp://127.0.0.1:170010100430308010043010045 
	///@remark 0100430300tcp0100430308010057¨050308¨09010057010050010078010001010084010052010086¨070100450100510100430300127.0.0.10100430308010057¨050308¨0903¤010016010082010009010074030001005801009101009003¤0100430100450100430308170010100430308010057¨050308¨0903¤0100160100820100090100740300010059010079010067010093010062010073010043010045
	virtual void RegisterFront(char *pszFrontAddress) = 0;
	
	///0309010044010055¨04010071010014030901009003¤010016010082010009010074030001008101001301007001000401005801009101009003¤
	///@param pszNsAddress010045010062010071010014030901009003¤010016010082010009010074030001008101001301007001000401005801009101009003¤010043010045
	///@remark 01008101001301007001000401005801009101009003¤0100580100720100600100090100780100650100820100490100450100620100430300protocol://ipaddress:port01004303080100450100510100760100040100450100620100430308tcp://127.0.0.1:120010100430308010043010045 
	///@remark 0100430300tcp0100430308010057¨050308¨09010057010050010078010001010084010052010086¨070100450100510100430300127.0.0.10100430308010057¨050308¨0903¤010016010082010009010074030001005801009101009003¤0100430100450100430308120010100430308010057¨050308¨0903¤0100160100820100090100740300010059010079010067010093010062010073010043010045
	///@remark RegisterNameServer010087010073010083010076010087010093RegisterFront
	virtual void RegisterNameServer(char *pszNsAddress) = 0;
	
	///0309010044010055¨04010071010014030901009003¤010016010082010009010074030001008701007101006303ì010084010073010083010044
	///@param pFensUserInfo01004501006201008701007101006303ì010084010073010083010044010043010045
	virtual void RegisterFensUserInfo(CThostFtdcFensUserInfoField * pFensUserInfo) = 0;
	
	///0309010044010055¨040100630100910100580300010065010087010067010093
	///@param pSpi 010073010077010077¨0503090100880100630100910100580300010065010087010067010093010068¨¤010058010072010078010058010068010015
	virtual void RegisterSpi(CThostFtdcMdSpi *pSpi) = 0;
	
	///010059010048010088010072010084010084010075¨07010043010045
	///@param ppInstrumentID 010062010083010088010064ID  
	///@param nCount 010086010049010059010048010088010072/010081010079010059010048010084010084010075¨07010058010072010062010083010088010064010060010012010078010015
	///@remark 
	virtual int SubscribeMarketData(char *ppInstrumentID[], int nCount) = 0;

	///010081010079010059010048010084010084010075¨07010043010045
	///@param ppInstrumentID 010062010083010088010064ID  
	///@param nCount 010086010049010059010048010088010072/010081010079010059010048010084010084010075¨07010058010072010062010083010088010064010060010012010078010015
	///@remark 
	virtual int UnSubscribeMarketData(char *ppInstrumentID[], int nCount) = 0;

	///01008701007101006303ì010058010075010070010064010075010005010075¨03
	virtual int ReqUserLogin(CThostFtdcReqUserLoginField *pReqUserLoginField, int nRequestID) = 0;
	

	///010058010075010056010012010075010005010075¨03
	virtual int ReqUserLogout(CThostFtdcUserLogoutField *pUserLogout, int nRequestID) = 0;
protected:
	~CThostFtdcMdApi(){};
};

#endif
